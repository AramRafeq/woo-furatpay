(()=>{"use strict";const e=window.React,a=window.wp.i18n,t=window.wp.element,r="furatpay",n=({services:a,selectedService:t,onSelect:r})=>(0,e.createElement)("ul",{className:"furatpay-method-list"},a.map((a=>(0,e.createElement)("li",{key:a.id,className:"furatpay-method-item"},(0,e.createElement)("label",null,(0,e.createElement)("input",{type:"radio",name:"furatpay_service",value:a.id,checked:t===a.id,onChange:()=>r(a.id),required:"required",className:"furatpay-service-radio"}),a.logo&&(0,e.createElement)("img",{src:a.logo,alt:a.name,className:"furatpay-method-logo"}),(0,e.createElement)("span",{className:"furatpay-method-name"},a.name)))))),s=({eventRegistration:s,emitResponse:c})=>{const[o,l]=(0,t.useState)(null),[m,i]=(0,t.useState)([]),{onPaymentSetup:p}=s;return(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch(furatpayData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"furatpay_get_payment_services",nonce:furatpayData.nonce})});if(!e.ok)throw new Error("Failed to fetch payment services");const a=await e.json();a.success&&Array.isArray(a.data)&&i(a.data)}catch(e){console.error("Error fetching payment services:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=p((()=>{if(!o)return{type:c.responseTypes.ERROR,message:(0,a.__)("Please select a payment service.","woo_furatpay")};const e=m.find((e=>e.id===o));return e?(console.log("FuratPay: Processing payment with service:",e),{type:c.responseTypes.SUCCESS,meta:{paymentMethodData:{payment_method:r,furatpay_service:o.toString(),furatpay_service_name:e.name}}}):{type:c.responseTypes.ERROR,message:(0,a.__)("Invalid payment service selected.","woo_furatpay")}}));return()=>e()}),[p,o,m]),0===m.length?(0,e.createElement)("div",{className:"furatpay-payment-method-block"},(0,e.createElement)("p",null,(0,a.__)("No payment services available.","woo_furatpay"))):(0,e.createElement)("div",{className:"furatpay-payment-method-block"},(0,e.createElement)(n,{services:m,selectedService:o,onSelect:l}))},c={name:r,label:(0,e.createElement)((()=>(0,e.createElement)("div",{className:"furatpay-block-label"},(0,e.createElement)("span",null,furatpayData.title),furatpayData.icon&&(0,e.createElement)("img",{src:furatpayData.icon,alt:"FuratPay",className:"furatpay-icon"}))),null),content:(0,e.createElement)(s,null),edit:(0,e.createElement)(s,null),canMakePayment:()=>!0,ariaLabel:(0,a.__)("FuratPay payment method","woo_furatpay"),supports:{features:furatpayData.supports||[],showSavedPaymentMethods:!1,showSaveOption:!1}},{registerPaymentMethod:o}=wc.wcBlocksRegistry;o(c)})();